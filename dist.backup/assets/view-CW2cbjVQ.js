import{g as u,l as y,c as a,i as s,r as E,a as x}from"./main-M4-12AxP.js";let i=[],e=null,d=-1;async function B(){const t=u("id");if(!t){r();return}const n=await y();if(!n){r();return}if(i=n.prompts,e=i.find(o=>o.id===t),!e){r();return}d=i.indexOf(e),I(),document.getElementById("copyBtn").addEventListener("click",m),document.getElementById("sendToCopilotBtn").addEventListener("click",b),document.getElementById("favoriteBtn").addEventListener("click",l),document.getElementById("prevBtn").addEventListener("click",p),document.getElementById("nextBtn").addEventListener("click",g),document.addEventListener("keydown",f)}function I(){document.getElementById("loadingState").classList.add("hidden"),document.getElementById("promptContent").classList.remove("hidden"),document.getElementById("promptIcon").textContent=e.icon,document.getElementById("promptTitle").textContent=e.title,document.getElementById("promptDepartment").textContent=e.department,document.getElementById("promptSubcategory").textContent=e.subcategory||"";const t=document.getElementById("promptComplexity"),n={beginner:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300",intermediate:"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300",advanced:"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300"};t.textContent=e.complexity,t.className=`badge text-xs ${n[e.complexity]||n.intermediate}`,c(),document.getElementById("promptDescription").textContent=e.description,document.getElementById("promptText").textContent=e.content,e.tips&&e.tips.length>0?(document.getElementById("tipsSection").classList.remove("hidden"),document.getElementById("promptTips").innerHTML=e.tips.map(o=>`<li class="flex gap-2"><span class="text-primary-600 dark:text-primary-400">•</span><span>${o}</span></li>`).join("")):document.getElementById("tipsSection").classList.add("hidden"),e.tags&&e.tags.length>0?(document.getElementById("tagsSection").classList.remove("hidden"),document.getElementById("promptTags").innerHTML=e.tags.map(o=>`<span class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold">${o}</span>`).join("")):document.getElementById("tagsSection").classList.add("hidden"),e.images&&e.images.length>0?(document.getElementById("imagesSection").classList.remove("hidden"),document.getElementById("promptImages").innerHTML=e.images.map(o=>`
        <img src="/thumbnails/${o}" alt="Example" class="w-full rounded-xl border-2 border-gray-200 dark:border-gray-700" loading="lazy">
      `).join("")):document.getElementById("imagesSection").classList.add("hidden"),document.getElementById("prevBtn").disabled=d===0,document.getElementById("nextBtn").disabled=d===i.length-1,document.title=`${e.title} | AI Prompt Library`}function c(){const t=document.getElementById("favoriteIcon"),n=s(e.id);t.textContent=n?"★":"☆",t.style.color=n?"#f59e0b":""}function m(){const t=e.content,n=document.getElementById("copyBtn");a(t,n)}function b(){const t=document.getElementById("sendToCopilotBtn"),n=t.innerHTML;try{const o={type:"SPARK_SEND_TO_COPILOT",promptText:e.content,promptDetails:{id:e.id,title:e.title,icon:e.icon,department:e.department,subcategory:e.subcategory,description:e.description,complexity:e.complexity,tips:e.tips||[],tags:e.tags||[],images:e.images||[],word_count:e.word_count}};window.opener&&!window.opener.closed?(window.opener.postMessage(o,"https://m365.cloud.microsoft"),t.innerHTML="✓ Sent!",t.classList.add("bg-green-600"),setTimeout(()=>{t.innerHTML=n,t.classList.remove("bg-green-600")},2e3)):(t.innerHTML="⚠️ Open from Copilot first",setTimeout(()=>{t.innerHTML=n},3e3),a(e.content,t),setTimeout(()=>{alert("Tip: Click the ⚡ button in Copilot Chat to open this library, then prompts will be sent automatically!")},100))}catch(o){console.error("Error sending to Copilot:",o),t.innerHTML="❌ Error",setTimeout(()=>{t.innerHTML=n},2e3)}}function l(){s(e.id)?E(e.id):x(e.id),c()}function p(){if(d>0){const t=i[d-1];window.location.href=`/view.html?id=${t.id}`}}function g(){if(d<i.length-1){const t=i[d+1];window.location.href=`/view.html?id=${t.id}`}}function f(t){if(!(t.target.tagName==="INPUT"||t.target.tagName==="TEXTAREA"))switch(t.key){case"c":case"C":m();break;case"f":case"F":l();break;case"ArrowLeft":p();break;case"ArrowRight":g();break}}function r(){document.getElementById("loadingState").classList.add("hidden"),document.getElementById("errorState").classList.remove("hidden")}document.addEventListener("DOMContentLoaded",B);
